(function(){var n;n=angular.module("app",[]),n.controller("remapper",["$scope","$http",function(n,e){var r,t,o,i,l,c,u,a,s;return n.current_control_scheme=null,n.control_schemes=["AdvancedControlPad.binds","BlackWidow.binds","ClassicKeyboardOnly.binds","ControlPad.binds","ControlPadYaw.binds","Empty.binds","GenericJoystick.binds","KeyboardMouseOnly.binds","LogitechG940.binds","SaitekAV8R03.binds","SaitekFLY5.binds","SaitekX52.binds","SaitekX52Pro.binds","SaitekX55.binds","ThrustMasterHOTASWarthog.binds","ThrustMasterTFlightHOTASX.binds"],n.file=null,n.row_count=20,n.columns=null,n.binds=[],n.config=!0,o=$("#config").height(),r=$("<table><tr><td>sizer</td></tr></table>"),$("body").append(r),u=r.height(),r.remove(),i=function(){var e;return e=o,n.config||(e=0),n.row_count=Math.floor((window.innerHeight-e-50)/u),n.$$phase?void 0:n.$apply()},a=_.throttle(i,250),s=function(){n.columns=t(n.binds,n.row_count),0===n.columns.length&&(n.columns=null)},c=function(e){var r,t,o,i,c;c=JSON.parse(xml2json($.parseXML(e),"")),o=c.Root,i=0,n.binds=[];for(r in o)t=o[r],l(t)||(t.action=r.titleize(),n.binds.push(t))},t=function(n,e){var r,t,o,i,l,c;for(t=[],r=[],i=l=0,c=n.length;c>l;i=++l)o=n[i],i>0&&i%e===0&&(t.push(r),r=[]),r.push(o);return 0!==r.length&&t.push(r),t},l=function(n){return null==n?!0:null==n.Primary&&null==n.Secondary?!0:null==n.Primary["@Key"]&&null==n.Secondary["@Key"]?!0:""===n.Primary["@Key"]&&""===n.Secondary["@Key"]?!0:!1},n.$watch("file",function(){return null!=n.file?c(n.file):void 0}),n.$watch("current_control_scheme",function(){return null!=n.current_control_scheme?e.get("control_schemes/"+n.current_control_scheme).success(c):void 0}),n.$watch("binds",s),n.$watch("row_count",s),n.$watch("config",i),$(window).on("resize",function(){return n.$apply(a)}),$(window).on("load",function(){return n.$apply(i)})}]),n.directive("fileread",[function(){return{scope:{fileread:"="},link:function(n,e){return e.bind("change",function(e){var r;return r=new FileReader,r.onload=function(e){return n.$apply(function(){return n.fileread=e.target.result})},r.readAsBinaryString(e.target.files[0])})}}}])}).call(this);